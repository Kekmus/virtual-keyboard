(()=>{"use strict";(()=>{const a={en:{Escape:"Esc",Digit1:"1",Digit2:"2",Digit3:"3",Digit4:"4",Digit5:"5",Digit6:"6",Digit7:"7",Digit8:"8",Digit9:"9",Digit0:"0",Minus:"-",Equal:"=",Backspace:"Backspace",Tab:"Tab",KeyQ:"q",KeyW:"w",KeyE:"e",KeyR:"r",KeyT:"t",KeyY:"y",KeyU:"u",KeyI:"i",KeyO:"o",KeyP:"p",BracketLeft:"[",BracketRight:"]",Backslash:"\\",CapsLock:"Caps Lock",KeyA:"a",KeyS:"s",KeyD:"d",KeyF:"f",KeyG:"g",KeyH:"h",KeyJ:"j",KeyK:"k",KeyL:"l",Semicolon:";",Quote:"'",Enter:"Enter",ShiftLeft:"Shift",KeyZ:"z",KeyX:"x",KeyC:"c",KeyV:"v",KeyB:"b",KeyN:"n",KeyM:"m",Comma:",",Period:".",Slash:"/",ShiftRight:"Shift",ControlLeft:"Ctrl",MetaLeft:"Super",AltLeft:"Alt",Space:"Space",AltRight:"Alt",ControlRight:"Ctrl",ArrowUp:"Up",ArrowLeft:"Left",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"},ru:{Escape:"Esc",Digit1:"1",Digit2:"2",Digit3:"3",Digit4:"4",Digit5:"5",Digit6:"6",Digit7:"7",Digit8:"8",Digit9:"9",Digit0:"0",Minus:"-",Equal:"=",Backspace:"Backspace",Tab:"Tab",KeyQ:"й",KeyW:"ц",KeyE:"у",KeyR:"к",KeyT:"е",KeyY:"н",KeyU:"г",KeyI:"ш",KeyO:"щ",KeyP:"з",BracketLeft:"х",BracketRight:"ъ",Backslash:"\\",CapsLock:"Caps Lock",KeyA:"ф",KeyS:"ы",KeyD:"в",KeyF:"а",KeyG:"п",KeyH:"р",KeyJ:"о",KeyK:"л",KeyL:"д",Semicolon:"ж",Quote:"э",Enter:"Enter",ShiftLeft:"Shift",KeyZ:"я",KeyX:"ч",KeyC:"с",KeyV:"м",KeyB:"и",KeyN:"т",KeyM:"ь",Comma:"б",Period:"ю",Slash:".",ShiftRight:"Shift",ControlLeft:"Ctrl",MetaLeft:"Super",AltLeft:"Alt",Space:"Space",AltRight:"Alt",ControlRight:"Ctrl",ArrowUp:"Up",ArrowLeft:"Left",ArrowRight:"Right",ArrowDown:"Down",Delete:"Del"}};function e(){var e=JSON.parse(localStorage.getItem("capsOn"))!==JSON.parse(localStorage.getItem("shiftOn")),t=localStorage.getItem("lang"),d=document.querySelector(".keyboard");Array.from(d.children).forEach((function(d){Array.from(d.children).forEach((function(d){var i=d.dataset.code,o=d.dataset.isspecial,c=a[t][i];d.setAttribute("data-value",c),d.innerHTML=e&&!o&&"Space"!==i?c.toUpperCase():c}))}))}function t(a){localStorage.setItem("start",a.selectionStart),localStorage.setItem("end",a.selectionEnd)}localStorage.getItem("lang")||localStorage.setItem("lang","en"),localStorage.setItem("capsOn","false"),localStorage.setItem("shiftOn","false"),localStorage.setItem("start","0"),localStorage.setItem("end","0");var d=document.querySelector("body"),i=document.createElement("div");i.classList="wrapper",i.innerHTML='<textarea autofocus></textarea>\n  <div class="keyboard">\n    <div class="keyboard__row">\n      <div class="keyboard__key" data-code="Escape" data-value="Escape" data-isSpecial="true">Esc</div>\n      <div class="keyboard__key" data-code="Digit1" data-value="1">1</div>\n      <div class="keyboard__key" data-code="Digit2" data-value="2">2</div>\n      <div class="keyboard__key" data-code="Digit3" data-value="3">3</div>\n      <div class="keyboard__key" data-code="Digit4" data-value="4">4</div>\n      <div class="keyboard__key" data-code="Digit5" data-value="5">5</div>\n      <div class="keyboard__key" data-code="Digit6" data-value="6">6</div>\n      <div class="keyboard__key" data-code="Digit7" data-value="7">7</div>\n      <div class="keyboard__key" data-code="Digit8" data-value="8">8</div>\n      <div class="keyboard__key" data-code="Digit9" data-value="9">9</div>\n      <div class="keyboard__key" data-code="Digit0" data-value="0">0</div>\n      <div class="keyboard__key" data-code="Minus" data-value="-">-</div>\n      <div class="keyboard__key" data-code="Equal" data-value="=">=</div>\n      <div class="keyboard__key" data-code="Backspace" data-value="Backspace" data-isSpecial="true">bksp</div>\n    </div>\n    <div class="keyboard__row">\n      <div class="keyboard__key" data-code="Tab" data-value="Tab" data-isSpecial="true">tab</div>\n      <div class="keyboard__key" data-code="KeyQ" data-value="q">q</div>\n      <div class="keyboard__key" data-code="KeyW" data-value="w">w</div>\n      <div class="keyboard__key" data-code="KeyE" data-value="e">e</div>\n      <div class="keyboard__key" data-code="KeyR" data-value="r">r</div>\n      <div class="keyboard__key" data-code="KeyT" data-value="t">t</div>\n      <div class="keyboard__key" data-code="KeyY" data-value="y">y</div>\n      <div class="keyboard__key" data-code="KeyU" data-value="u">u</div>\n      <div class="keyboard__key" data-code="KeyI" data-value="i">i</div>\n      <div class="keyboard__key" data-code="KeyO" data-value="o">o</div>\n      <div class="keyboard__key" data-code="KeyP" data-value="p">p</div>\n      <div class="keyboard__key" data-code="BracketLeft" data-value="[">[</div>\n      <div class="keyboard__key" data-code="BracketRight" data-value="]">]</div>\n      <div class="keyboard__key" data-code="Backslash" data-value="\\">\\</div>\n    </div>\n    <div class="keyboard__row">\n      <div class="keyboard__key" data-code="CapsLock" data-value="CapsLock" data-isSpecial="true">Cps Lck</div>\n      <div class="keyboard__key" data-code="KeyA" data-value="a">a</div>\n      <div class="keyboard__key" data-code="KeyS" data-value="s">s</div>\n      <div class="keyboard__key" data-code="KeyD" data-value="d">d</div>\n      <div class="keyboard__key" data-code="KeyF" data-value="f">f</div>\n      <div class="keyboard__key" data-code="KeyG" data-value="g">g</div>\n      <div class="keyboard__key" data-code="KeyH" data-value="h">h</div>\n      <div class="keyboard__key" data-code="KeyJ" data-value="j">j</div>\n      <div class="keyboard__key" data-code="KeyK" data-value="k">k</div>\n      <div class="keyboard__key" data-code="KeyL" data-value="l">l</div>\n      <div class="keyboard__key" data-code="Semicolon" data-value=";">;</div>\n      <div class="keyboard__key" data-code="Quote" data-value="\'">\'</div>\n      <div class="keyboard__key" data-code="Enter" data-value="Enter" data-isSpecial="true">Enter</div>\n    </div>\n    <div class="keyboard__row">\n      <div class="keyboard__key" data-code="ShiftLeft" data-value="Shift" data-isSpecial="true">Shift</div>\n      <div class="keyboard__key" data-code="KeyZ" data-value="z">z</div>\n      <div class="keyboard__key" data-code="KeyX" data-value="x">x</div>\n      <div class="keyboard__key" data-code="KeyC" data-value="c">c</div>\n      <div class="keyboard__key" data-code="KeyV" data-value="v">v</div>\n      <div class="keyboard__key" data-code="KeyB" data-value="b">b</div>\n      <div class="keyboard__key" data-code="KeyN" data-value="n">n</div>\n      <div class="keyboard__key" data-code="KeyM" data-value="m">m</div>\n      <div class="keyboard__key" data-code="Comma" data-value=",">,</div>\n      <div class="keyboard__key" data-code="Period" data-value=".">.</div>\n      <div class="keyboard__key" data-code="Slash" data-value="/">/</div>\n      <div class="keyboard__key" data-code="ShiftRight" data-value="Shift" data-isSpecial="true">Shift</div>\n      <div class="keyboard__key" data-code="ArrowUp" data-value="ArrowUp" data-isSpecial="true">up</div>\n      <div class="keyboard__key" data-code="Delete" data-value="Delete" data-isSpecial="true">del</div>\n    </div>\n    <div class="keyboard__row">\n      <div class="keyboard__key" data-code="ControlLeft" data-value="Ctrl" data-isSpecial="true">Ctrl</div>\n      <div class="keyboard__key" data-code="MetaLeft" data-value="Meta" data-isSpecial="true">Meta</div>\n      <div class="keyboard__key" data-code="AltLeft" data-value="Alt" data-isSpecial="true">Alt</div>\n      <div class="keyboard__key" data-code="Space" data-value=" ">Space</div>\n      <div class="keyboard__key" data-code="AltRight" data-value="Alt" data-isSpecial="true">Alt</div>\n      <div class="keyboard__key" data-code="ControlRight" data-value="Ctrl" data-isSpecial="true">Ctrl</div>\n      <div class="keyboard__key" data-code="ArrowLeft" data-value="ArrowLeft" data-isSpecial="true">left</div>\n      <div class="keyboard__key" data-code="ArrowDown" data-value="ArrowDown" data-isSpecial="true">down</div>\n      <div class="keyboard__key" data-code="ArrowRight" data-value="ArrowRight" data-isSpecial="true">right</div>\n    </div>\n  </div>\n  <p class="switch__lang">Switch language: alt + shift</p>\n',d.append(i),e();var o=document.querySelector(".keyboard"),c=document.querySelector("textarea");c.addEventListener("input",t.bind(void 0,c)),c.addEventListener("click",t.bind(void 0,c)),o.addEventListener("mousedown",function(a,d){if(d.target.classList.contains("keyboard__key")){var i=d.target;if(i.classList.contains("keyboard__key__active"))return;i.classList.add("keyboard__key__active");var o=i.dataset.code;if(i.dataset.isspecial){if("ShiftLeft"!==o&&"ShiftRight"!==o||(localStorage.setItem("shiftOn",!0),e()),"CapsLock"===o){var c=!JSON.parse(localStorage.getItem("capsOn"));localStorage.setItem("capsOn",c),e()}if("Tab"===o){var l=+localStorage.getItem("start"),s=+localStorage.getItem("end"),r=a.value.substring(0,l),n=a.value.substring(s);a.value="".concat(r).concat("\t").concat(n),a.selectionStart=l+"\t".length,a.selectionEnd=l+"\t".length,t(a)}if("Backspace"===o){var v=+localStorage.getItem("start"),y=+localStorage.getItem("end");if(a.selectionStart!==a.selectionEnd){var k=a.value.substring(0,v),u=a.value.substring(y);a.value="".concat(k).concat(u),a.selectionStart=v,a.selectionEnd=v}else{var _=a.value.substring(0,v-1),g=a.value.substring(y);a.value="".concat(_).concat(g),a.selectionStart=v-1,a.selectionEnd=v-1}t(a)}if("Enter"===o){var S=+localStorage.getItem("start"),b=+localStorage.getItem("end"),p=a.value.substring(0,S),f=a.value.substring(b);a.value="".concat(p).concat("\n").concat(f),a.selectionStart=S+"\n".length,a.selectionEnd=S+"\n".length,t(a)}if("Delete"===o){var K=+localStorage.getItem("start"),h=+localStorage.getItem("end");if(a.selectionStart!==a.selectionEnd){var m=a.value.substring(0,K),L=a.value.substring(h);a.value="".concat(m).concat(L),a.selectionStart=K,a.selectionEnd=K}else{var D=a.value.substring(0,K),w=a.value.substring(h+1);a.value="".concat(D).concat(w),a.selectionStart=K,a.selectionEnd=K}t(a)}}else{var A=i.dataset.value,E=JSON.parse(localStorage.getItem("capsOn")),I=JSON.parse(localStorage.getItem("shiftOn"));a.value+=E!==I?"Space"===A?" ":A.toUpperCase():"Space"===A?" ":A,t(a)}}}.bind(void 0,c)),o.addEventListener("click",function(a,t){if(t.target.classList.contains("keyboard__key")){var d=t.target,i=d.dataset.code;"ShiftLeft"!==i&&"ShiftRight"!==i||(localStorage.setItem("shiftOn",!1),e()),d.classList.remove("keyboard__key__active")}}.bind(void 0,c)),document.addEventListener("keydown",function(a,d,i){d.focus();var o=i.code,c=a.querySelector('[data-code="'.concat(o,'"]'));c.classList.add("keyboard__key__active");var l=c.dataset.isspecial;if(l&&!/Backspace|Delete|Enter|ArrowRight|ArrowLeft|ArrowDown|ArrowUp/i.test(o)&&i.preventDefault(),!l){i.preventDefault();var s=c.dataset.value,r=JSON.parse(localStorage.getItem("capsOn")),n=JSON.parse(localStorage.getItem("shiftOn"));d.value+=r!==n?"Space"===s?" ":s.toUpperCase():"Space"===s?" ":s,t(d)}if(i.shiftKey&&i.altKey)return"en"===localStorage.getItem("lang")?localStorage.setItem("lang","ru"):localStorage.setItem("lang","en"),void e();if("Tab"===o){var v=+localStorage.getItem("start"),y=+localStorage.getItem("end"),k=d.value.substring(0,v),u=d.value.substring(y);d.value="".concat(k).concat("\t").concat(u),d.selectionStart=v+"\t".length,d.selectionEnd=v+"\t".length,t(d)}if("ShiftLeft"!==o&&"ShiftRight"!==o||(localStorage.setItem("shiftOn",!0),e()),"CapsLock"===o){var _=!JSON.parse(localStorage.getItem("capsOn"));localStorage.setItem("capsOn",_),e()}/ArrowRight|ArrowLeft|ArrowDown|ArrowUp/i.test(o)&&setTimeout((function(){t(d)}),0)}.bind(void 0,o,c)),document.addEventListener("keyup",function(a,t,d){var i=d.code,o=a.querySelector('[data-code="'.concat(i,'"]'));"ShiftLeft"!==i&&"ShiftRight"!==i||(localStorage.setItem("shiftOn",!1),e()),o.classList.remove("keyboard__key__active")}.bind(void 0,o,c))})()})();